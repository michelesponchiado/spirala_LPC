<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>CO_Emergency.h</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="CO_Emergency.h"></a>CO_Emergency.h</h1><div class=CBody><p>CANopen Emergency object.</p><p>Copyright &copy; 2004-2008 Janez Paternoster</p><p>License: GNU Lesser General Public License (LGPL).</p><p><a href="http://canopennode.sourceforge.net" class=LURL target=_top>http://canopennode.sourceforge.net</a></p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#CO_Emergency.h" >CO_Emergency.h</a></td><td class=SDescription>CANopen Emergency object.</td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Usage" >Usage</a></td><td class=SDescription>Emergency object is used for control internal error state and for sending Emergency message.</td></tr><tr class="SGeneric"><td class=SEntry><a href="#Emergency_message" >Emergency message</a></td><td class=SDescription>Contents of Emergency message (COB-ID = 0x80 + Node-ID).</td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Error_code" >Error code</a></td><td class=SDescription></td></tr><tr class="SGeneric"><td class=SEntry><a href="#Error_register" >Error register</a></td><td class=SDescription>Object dictionary, index 0x1001.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Constants" >Constants</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#Error_status_bits" >Error status bits</a></td><td class=SDescription>Indexes and <a href="#Error_code" class=LGeneric >Error code</a>s of specific errors. </td></tr><tr class="SGroup"><td class=SEntry><a href="#Variables" >Variables</a></td><td class=SDescription></td></tr><tr class="SVariable SIndent1 SMarked"><td class=SEntry><a href="#CO_emergencyReport_t" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a></td><td class=SDescription>Object contains error buffer, to which new emergency messages are written, when <a href="#CO_errorReport" class=LFunction id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">CO_errorReport</a> function is called. </td></tr><tr class="SGroup"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CO_errorReport" id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">CO_errorReport</a></td><td class=SDescription>Report error condition.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#CO_errorReset" id=link4 onMouseOver="ShowTip(event, 'tt3', 'link4')" onMouseOut="HideTip('tt3')">CO_errorReset</a></td><td class=SDescription>Resets error condition.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CO_isError" id=link5 onMouseOver="ShowTip(event, 'tt4', 'link5')" onMouseOut="HideTip('tt4')">CO_isError</a></td><td class=SDescription>Check specific error condition.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Variables" >Variables</a></td><td class=SDescription></td></tr><tr class="SVariable SIndent1 SMarked"><td class=SEntry><a href="#CO_emergencyProcess_t" id=link6 onMouseOver="ShowTip(event, 'tt5', 'link6')" onMouseOut="HideTip('tt5')">CO_emergencyProcess_t</a></td><td class=SDescription>Object controls internal error state and sends emergency message.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CO_ODF_1003" id=link7 onMouseOver="ShowTip(event, 'tt6', 'link7')" onMouseOut="HideTip('tt6')">CO_ODF_1003</a></td><td class=SDescription>Function for accessing <u>Pre-Defined Error Field</u> (index 0x1003) from SDO server.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#CO_ODF_1014" id=link8 onMouseOver="ShowTip(event, 'tt7', 'link8')" onMouseOut="HideTip('tt7')">CO_ODF_1014</a></td><td class=SDescription>Function for accessing <u>COB ID EMCY</u> (index 0x1014) from SDO server.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CO_emergency_init" id=link9 onMouseOver="ShowTip(event, 'tt8', 'link9')" onMouseOut="HideTip('tt8')">CO_emergency_init</a></td><td class=SDescription>Create and initialize Emergency object.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#CO_emergency_delete" id=link10 onMouseOver="ShowTip(event, 'tt9', 'link10')" onMouseOut="HideTip('tt9')">CO_emergency_delete</a></td><td class=SDescription>Delete Emergency object and free memory.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CO_emergency_process" id=link11 onMouseOver="ShowTip(event, 'tt10', 'link11')" onMouseOut="HideTip('tt10')">CO_emergency_process</a></td><td class=SDescription>Process Emergency object.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="Usage"></a>Usage</h3><div class=CBody><p>Emergency object is used for control internal error state and for sending Emergency message.</p><p>Each error condition, which may hapen somewhere in program, has assigned its specific index (see &lt;Error status bits&gt;).&nbsp; Whenever error occures, <a href="#CO_errorReport" class=LFunction id=link12 onMouseOver="ShowTip(event, 'tt2', 'link12')" onMouseOut="HideTip('tt2')">CO_errorReport()</a> function is called with this index (and some extra information).&nbsp; Function then sets internal error flag bit and sends CANopen Emergency message.</p><p>Specific error condition is reported only the first time.&nbsp; Specific error flag bit can also be reset by <a href="#CO_errorReset" class=LFunction id=link13 onMouseOver="ShowTip(event, 'tt3', 'link13')" onMouseOut="HideTip('tt3')">CO_errorReset()</a> function.</p><p>Latest errors can be read from &lsquo;Pre Defined Error Field&rsquo; (object dictionary, index 0x1003).</p></div></div></div>

<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="Emergency_message"></a>Emergency message</h3><div class=CBody><p>Contents of Emergency message (COB-ID = 0x80 + Node-ID).</p><p>For CAN identifier see &lt;Default COB identifiers&gt;.</p><h4 class=CHeading>Specific data bytes</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>byte 0..1</td><td class=CDLDescription><a href="#Error_code" class=LGeneric >Error code</a></td></tr><tr><td class=CDLEntry>byte 2</td><td class=CDLDescription><a href="#Error_register" class=LGeneric id=link14 onMouseOver="ShowTip(event, 'tt11', 'link14')" onMouseOut="HideTip('tt11')">Error register</a></td></tr><tr><td class=CDLEntry>byte 3</td><td class=CDLDescription>Index of error condition (see &lt;Error status bits&gt;).</td></tr><tr><td class=CDLEntry>byte 4..7</td><td class=CDLDescription>Additional argument to <a href="#CO_errorReport" class=LFunction id=link15 onMouseOver="ShowTip(event, 'tt2', 'link15')" onMouseOut="HideTip('tt2')">CO_errorReport()</a> function.</td></tr></table><h4 class=CHeading>Contents of <u>Pre Defined Error Field</u> (object dictionary, index 0x1003)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>byte 0..3</td><td class=CDLDescription>Equal to bytes 0..3 in the Emergency message</td></tr></table></div></div></div>

<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="Error_code"></a>Error code</h3><div class=CBody><h4 class=CHeading>Error codes According to CiA ds-301</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>00xx</td><td class=CDLDescription>Error Reset or No Error</td></tr><tr><td class=CDLEntry>10xx</td><td class=CDLDescription>Generic Error</td></tr><tr><td class=CDLEntry>20xx</td><td class=CDLDescription>Current</td></tr><tr><td class=CDLEntry>21xx</td><td class=CDLDescription>Current, device input side</td></tr><tr><td class=CDLEntry>22xx</td><td class=CDLDescription>Current inside the device</td></tr><tr><td class=CDLEntry>23xx</td><td class=CDLDescription>Current, device output side</td></tr><tr><td class=CDLEntry>30xx</td><td class=CDLDescription>Voltage</td></tr><tr><td class=CDLEntry>31xx</td><td class=CDLDescription>Mains Voltage</td></tr><tr><td class=CDLEntry>32xx</td><td class=CDLDescription>Voltage inside the device</td></tr><tr><td class=CDLEntry>33xx</td><td class=CDLDescription>Output Voltage</td></tr><tr><td class=CDLEntry>40xx</td><td class=CDLDescription>Temperature</td></tr><tr><td class=CDLEntry>41xx</td><td class=CDLDescription>Ambient Temperature</td></tr><tr><td class=CDLEntry>42xx</td><td class=CDLDescription>Device Temperature</td></tr><tr><td class=CDLEntry>50xx</td><td class=CDLDescription>Device Hardware</td></tr><tr><td class=CDLEntry>60xx</td><td class=CDLDescription>Device Software</td></tr><tr><td class=CDLEntry>61xx</td><td class=CDLDescription>Internal Software</td></tr><tr><td class=CDLEntry>62xx</td><td class=CDLDescription>User Software</td></tr><tr><td class=CDLEntry>63xx</td><td class=CDLDescription>Data Set</td></tr><tr><td class=CDLEntry>70xx</td><td class=CDLDescription>Additional Modules</td></tr><tr><td class=CDLEntry>80xx</td><td class=CDLDescription>Monitoring</td></tr><tr><td class=CDLEntry>81xx</td><td class=CDLDescription>Communication</td></tr><tr><td class=CDLEntry>8110</td><td class=CDLDescription>CAN Overrun (Objects lost)</td></tr><tr><td class=CDLEntry>8120</td><td class=CDLDescription>CAN in Error Passive Mode</td></tr><tr><td class=CDLEntry>8130</td><td class=CDLDescription>Life Guard Error or Heartbeat Error</td></tr><tr><td class=CDLEntry>8140</td><td class=CDLDescription>recovered from bus off</td></tr><tr><td class=CDLEntry>8150</td><td class=CDLDescription>CAN-ID collision</td></tr><tr><td class=CDLEntry>82xx</td><td class=CDLDescription>Protocol Error</td></tr><tr><td class=CDLEntry>8210</td><td class=CDLDescription>PDO not processed due to length error</td></tr><tr><td class=CDLEntry>8220</td><td class=CDLDescription>PDO length exceeded</td></tr><tr><td class=CDLEntry>8230</td><td class=CDLDescription>DAM MPDO not processed, destination object not available</td></tr><tr><td class=CDLEntry>8240</td><td class=CDLDescription>Unexpected SYNC data length</td></tr><tr><td class=CDLEntry>8250</td><td class=CDLDescription>RPDO timeout</td></tr><tr><td class=CDLEntry>90xx</td><td class=CDLDescription>External Error</td></tr><tr><td class=CDLEntry>F0xx</td><td class=CDLDescription>Additional Functions</td></tr><tr><td class=CDLEntry>FFxx</td><td class=CDLDescription>Device specific</td></tr></table><h4 class=CHeading>Error codes According to CiA ds-401</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>2310</td><td class=CDLDescription>Current at outputs too high (overload)</td></tr><tr><td class=CDLEntry>2320</td><td class=CDLDescription>Short circuit at outputs</td></tr><tr><td class=CDLEntry>2330</td><td class=CDLDescription>Load dump at outputs</td></tr><tr><td class=CDLEntry>3110</td><td class=CDLDescription>Input voltage too high</td></tr><tr><td class=CDLEntry>3120</td><td class=CDLDescription>Input voltage too low</td></tr><tr><td class=CDLEntry>3210</td><td class=CDLDescription>Internal voltage too high</td></tr><tr><td class=CDLEntry>3220</td><td class=CDLDescription>Internal voltage too low</td></tr><tr><td class=CDLEntry>3310</td><td class=CDLDescription>Output voltage too high</td></tr><tr><td class=CDLEntry>3320</td><td class=CDLDescription>Output voltage too low</td></tr></table></div></div></div>

<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="Error_register"></a>Error register</h3><div class=CBody><p>Object dictionary, index 0x1001.</p><p>Error register is calculated from critical internal <a href="#Error_status_bits" class=LConstant id=link16 onMouseOver="ShowTip(event, 'tt12', 'link16')" onMouseOut="HideTip('tt12')">Error status bits</a>.&nbsp; Generic and communication bits are calculated in <a href="#CO_emergency_process" class=LFunction id=link17 onMouseOver="ShowTip(event, 'tt10', 'link17')" onMouseOut="HideTip('tt10')">CO_emergency_process</a> function, device profile or manufacturer specific bits may be calculated inside application.</p><p>Internal errors may prevent device to stay in NMT Operational state.&nbsp; Details are described in <u>Error Behavior</u> object in Object Dictionary at index 0x1029.</p><h4 class=CHeading>Specific bits</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>bit 0</td><td class=CDLDescription>generic error</td></tr><tr><td class=CDLEntry>bit 1</td><td class=CDLDescription>current</td></tr><tr><td class=CDLEntry>bit 2</td><td class=CDLDescription>voltage</td></tr><tr><td class=CDLEntry>bit 3</td><td class=CDLDescription>temperature</td></tr><tr><td class=CDLEntry>bit 4</td><td class=CDLDescription>communication error (overrun, error state)</td></tr><tr><td class=CDLEntry>bit 5</td><td class=CDLDescription>device profile specific</td></tr><tr><td class=CDLEntry>bit 6</td><td class=CDLDescription>Reserved (always 0)</td></tr><tr><td class=CDLEntry>bit 7</td><td class=CDLDescription>manufacturer specific</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Constants"></a>Constants</h3></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="Error_status_bits"></a>Error status bits</h3><div class=CBody><p>Indexes and <a href="#Error_code" class=LGeneric >Error code</a>s of specific errors.&nbsp; Constants are used with <a href="#CO_errorReport" class=LFunction id=link18 onMouseOver="ShowTip(event, 'tt2', 'link18')" onMouseOut="HideTip('tt2')">CO_errorReport()</a> or <a href="#CO_errorReset" class=LFunction id=link19 onMouseOver="ShowTip(event, 'tt3', 'link19')" onMouseOut="HideTip('tt3')">CO_errorReset()</a> functions.</p><p><a href="#CO_errorReport" class=LFunction id=link20 onMouseOver="ShowTip(event, 'tt2', 'link20')" onMouseOut="HideTip('tt2')">CO_errorReport()</a> sets specific bit in variable <u>errorStatusBits</u> from <a href="#CO_emergencyReport_t" class=LVariable id=link21 onMouseOver="ShowTip(event, 'tt1', 'link21')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a> object.&nbsp; Type of variable <u>errorStatusBits</u> is string with lenght 10 unsigned characters (by default).&nbsp; That means, variable has 80 error bits (form 0x00 to 0x4F).&nbsp; Maximum length of variable is 32 bytes, that is 255 error bits.</p><p>First value is unique ID for emergency message, second value is &lt;Error Code&gt; as specified in standard.</p><p>Internal errors may prevent device to stay in NMT Operational state.&nbsp; Details are described in <u>Error Behavior</u> object in Object Dictionary at index 0x1029.</p><h4 class=CHeading>Communication or protocol errors (informative)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry><a name="ERROR_NO_ERROR"></a>ERROR_NO_ERROR</td><td class=CDLDescription>00, 0x0000 - Error Reset or No Error.</td></tr><tr><td class=CDLEntry><a name="ERROR_CAN_BUS_WARNING"></a>ERROR_CAN_BUS_WARNING</td><td class=CDLDescription>01, 0x0000 - CAN bus warning.</td></tr><tr><td class=CDLEntry><a name="ERROR_RXMSG_WRONG_LENGTH"></a>ERROR_RXMSG_WRONG_LENGTH</td><td class=CDLDescription>02, 0x8200 - Wrong data length of received CAN message.</td></tr><tr><td class=CDLEntry><a name="ERROR_RXMSG_OVERFLOW"></a>ERROR_RXMSG_OVERFLOW</td><td class=CDLDescription>03, 0x8200 - Previous received CAN message wasn&rsquo;t processed yet.</td></tr><tr><td class=CDLEntry><a name="ERROR_RPDO_WRONG_LENGTH"></a>ERROR_RPDO_WRONG_LENGTH</td><td class=CDLDescription>04, 0x8210 - Wrong data length of received PDO.</td></tr><tr><td class=CDLEntry><a name="ERROR_RPDO_OVERFLOW"></a>ERROR_RPDO_OVERFLOW</td><td class=CDLDescription>05, 0x8200 - Previous received PDO wasn&rsquo;t processed yet.</td></tr><tr><td class=CDLEntry><a name="ERROR_CAN_RX_BUS_PASSIVE"></a>ERROR_CAN_RX_BUS_PASSIVE</td><td class=CDLDescription>06, 0x8120 - CAN receive bus is passive.</td></tr><tr><td class=CDLEntry><a name="ERROR_CAN_TX_BUS_PASSIVE"></a>ERROR_CAN_TX_BUS_PASSIVE</td><td class=CDLDescription>07, 0x8120 - CAN transmit bus is passive.</td></tr><tr><td class=CDLEntry><a name="ERROR_NMT_WRONG_COMMAND"></a>ERROR_NMT_WRONG_COMMAND</td><td class=CDLDescription>08, 0x8200 - Wrong NMT command received.</td></tr><tr><td class=CDLEntry><a name="ERROR_09_unused"></a>ERROR_09_unused</td><td class=CDLDescription>09, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_0A_unused"></a>ERROR_0A_unused</td><td class=CDLDescription>0A, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_0B_unused"></a>ERROR_0B_unused</td><td class=CDLDescription>0B, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_0C_unused"></a>ERROR_0C_unused</td><td class=CDLDescription>0C, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_0D_unused"></a>ERROR_0D_unused</td><td class=CDLDescription>0D, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_0E_unused"></a>ERROR_0E_unused</td><td class=CDLDescription>0E, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_0F_unused"></a>ERROR_0F_unused</td><td class=CDLDescription>0F, 0x1000 - (unused)</td></tr></table><h4 class=CHeading>Communication or protocol errors (critical)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry><a name="ERROR_10_unused"></a>ERROR_10_unused</td><td class=CDLDescription>10, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_11_unused"></a>ERROR_11_unused</td><td class=CDLDescription>11, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_CAN_TX_BUS_OFF"></a>ERROR_CAN_TX_BUS_OFF</td><td class=CDLDescription>12, 0x8140 - CAN transmit bus is off.</td></tr><tr><td class=CDLEntry><a name="ERROR_CAN_RXB_OVERFLOW"></a>ERROR_CAN_RXB_OVERFLOW</td><td class=CDLDescription>13, 0x8110 - CAN module receive buffer has overflowed.</td></tr><tr><td class=CDLEntry><a name="ERROR_CAN_TX_OVERFLOW"></a>ERROR_CAN_TX_OVERFLOW</td><td class=CDLDescription>14, 0x8110 - CAN transmit buffer has overflowed.</td></tr><tr><td class=CDLEntry><a name="ERROR_TPDO_OUTSIDE_WINDOW"></a>ERROR_TPDO_OUTSIDE_WINDOW</td><td class=CDLDescription>15, 0x8100 - TPDO is outside SYNC window.</td></tr><tr><td class=CDLEntry><a name="ERROR_16_unused"></a>ERROR_16_unused</td><td class=CDLDescription>16, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_17_unused"></a>ERROR_17_unused</td><td class=CDLDescription>17, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_SYNC_TIME_OUT"></a>ERROR_SYNC_TIME_OUT</td><td class=CDLDescription>18, 0x8100 - SYNC message timeout.</td></tr><tr><td class=CDLEntry><a name="ERROR_SYNC_LENGTH"></a>ERROR_SYNC_LENGTH</td><td class=CDLDescription>19, 0x8240 - Unexpected SYNC data length</td></tr><tr><td class=CDLEntry><a name="ERROR_PDO_WRONG_MAPPING"></a>ERROR_PDO_WRONG_MAPPING</td><td class=CDLDescription>1A, 0x8200 - Error with PDO mapping.</td></tr><tr><td class=CDLEntry><a name="ERROR_HEARTBEAT_CONSUMER"></a>ERROR_HEARTBEAT_CONSUMER</td><td class=CDLDescription>1B, 0x8130 - Heartbeat consumer timeout.</td></tr><tr><td class=CDLEntry><a name="ERROR_HEARTBEAT_CONSUMER_REMOTE_RESET"></a>ERROR_HEARTBEAT_CONSUMER_REMOTE_RESET</td><td class=CDLDescription>1C, 0x8130 - Heartbeat consumer detected remote node reset.</td></tr><tr><td class=CDLEntry><a name="ERROR_1D_unused"></a>ERROR_1D_unused</td><td class=CDLDescription>1D, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_1E_unused"></a>ERROR_1E_unused</td><td class=CDLDescription>1E, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_1F_unused"></a>ERROR_1F_unused</td><td class=CDLDescription>1F, 0x1000 - (unused)</td></tr></table><h4 class=CHeading>Generic errors (informative)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry><a name="ERROR_EMERGENCY_BUFFER_FULL"></a>ERROR_EMERGENCY_BUFFER_FULL</td><td class=CDLDescription>20, 0x1000 - Emergency buffer is full, Emergency message wasn&rsquo;t sent.</td></tr><tr><td class=CDLEntry><a name="ERROR_ERROR_REPORT_BUSY"></a>ERROR_ERROR_REPORT_BUSY</td><td class=CDLDescription>21, 0x1000 - <a href="#CO_errorReport" class=LFunction id=link22 onMouseOver="ShowTip(event, 'tt2', 'link22')" onMouseOut="HideTip('tt2')">CO_errorReport</a> is busy, Emergency message wasn&rsquo;t sent.</td></tr><tr><td class=CDLEntry><a name="ERROR_MICROCONTROLLER_RESET"></a>ERROR_MICROCONTROLLER_RESET</td><td class=CDLDescription>22, 0x1000 - Microcontroller has just started.</td></tr><tr><td class=CDLEntry><a name="ERROR_23_unused"></a>ERROR_23_unused</td><td class=CDLDescription>23, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_24_unused"></a>ERROR_24_unused</td><td class=CDLDescription>24, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_25_unused"></a>ERROR_25_unused</td><td class=CDLDescription>25, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_26_unused"></a>ERROR_26_unused</td><td class=CDLDescription>26, 0x1000 - (unused)</td></tr><tr><td class=CDLEntry><a name="ERROR_27_unused"></a>ERROR_27_unused</td><td class=CDLDescription>27, 0x1000 - (unused)</td></tr></table><h4 class=CHeading>Generic errors (critical)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry><a name="ERROR_WRONG_ERROR_REPORT"></a>ERROR_WRONG_ERROR_REPORT</td><td class=CDLDescription>28, 0x6100 - Wrong parameters to <a href="#CO_errorReport" class=LFunction id=link23 onMouseOver="ShowTip(event, 'tt2', 'link23')" onMouseOut="HideTip('tt2')">CO_errorReport()</a> function.</td></tr><tr><td class=CDLEntry><a name="ERROR_ISR_TIMER_OVERFLOW"></a>ERROR_ISR_TIMER_OVERFLOW</td><td class=CDLDescription>29, 0x6100 - Timer task has overflowed.</td></tr><tr><td class=CDLEntry><a name="ERROR_MEMORY_ALLOCATION_ERROR"></a>ERROR_MEMORY_ALLOCATION_ERROR</td><td class=CDLDescription>2A, 0x6100 - Unable to allocate memory for objects.</td></tr><tr><td class=CDLEntry><a name="ERROR_GENERIC_ERROR"></a>ERROR_GENERIC_ERROR</td><td class=CDLDescription>2B, 0x1000 - Generic error, test usage.</td></tr><tr><td class=CDLEntry><a name="ERROR_MAIN_TIMER_OVERFLOW"></a>ERROR_MAIN_TIMER_OVERFLOW</td><td class=CDLDescription>2C, 0x6100 - Mainline function exceeded maximum execution time.</td></tr><tr><td class=CDLEntry><a name="ERROR_INCONSISTENT_OBJECT_DICTIONARY"></a>ERROR_INCONSISTENT_OBJECT_DICTIONARY</td><td class=CDLDescription>2D, 0x6100 - Object dictionary does not match the software.</td></tr><tr><td class=CDLEntry><a name="ERROR_CALCULATION_OF_PARAMETERS"></a>ERROR_CALCULATION_OF_PARAMETERS</td><td class=CDLDescription>2E, 0x1000 - Error in calculation of device parameters.</td></tr><tr><td class=CDLEntry><a name="ERROR_NON_VOLATILE_MEMORY"></a>ERROR_NON_VOLATILE_MEMORY</td><td class=CDLDescription>2F, 0x5000 - Error with access to non volatile device memory</td></tr></table><h4 class=CHeading>Manufacturer specific errors</h4><p>Manufacturer may define its own constants up to index 0xFF.&nbsp; Of course, he must then define large enough buffer for error status bits (up to 32 bytes).</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Variables"></a>Variables</h3></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="CO_emergencyReport_t"></a>CO_emergencyReport_t</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>typedef struct{ UNSIGNED8 *errorStatusBits; UNSIGNED8 errorStatusBitsSize; UNSIGNED8 *msgBuffer; UNSIGNED8 *msgBufferEnd; UNSIGNED8 *msgBufferWritePtr; UNSIGNED8 *msgBufferReadPtr; UNSIGNED8 msgBufferFull; UNSIGNED8 wrongErrorReport; UNSIGNED8 errorReportBusy; UNSIGNED8 errorReportBusyError; }CO_emergencyReport_t</td></tr></table></blockquote><p>Object contains error buffer, to which new emergency messages are written, when <a href="#CO_errorReport" class=LFunction id=link24 onMouseOver="ShowTip(event, 'tt2', 'link24')" onMouseOut="HideTip('tt2')">CO_errorReport</a> function is called.&nbsp; This object is in pair with <a href="#CO_emergencyProcess_t" class=LVariable id=link25 onMouseOver="ShowTip(event, 'tt5', 'link25')" onMouseOut="HideTip('tt5')">CO_emergencyProcess_t</a> object.</p><h4 class=CHeading>Variables</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>errorStatusBits</td><td class=CDLDescription>See parameters in <a href="#CO_emergency_init" class=LFunction id=link26 onMouseOver="ShowTip(event, 'tt8', 'link26')" onMouseOut="HideTip('tt8')">CO_emergency_init</a>.</td></tr><tr><td class=CDLEntry>errorStatusBitsSize</td><td class=CDLDescription>See parameters in <a href="#CO_emergency_init" class=LFunction id=link27 onMouseOver="ShowTip(event, 'tt8', 'link27')" onMouseOut="HideTip('tt8')">CO_emergency_init</a>.</td></tr><tr><td class=CDLEntry>msgBuffer</td><td class=CDLDescription>Internal buffer for storing unsent emergency messages.</td></tr><tr><td class=CDLEntry>msgBufferEnd</td><td class=CDLDescription>End+1 address of the above buffer</td></tr><tr><td class=CDLEntry>msgBufferWritePtr</td><td class=CDLDescription>Write pointer in the above buffer.</td></tr><tr><td class=CDLEntry>msgBufferReadPtr</td><td class=CDLDescription>Read pointer in the above buffer.</td></tr><tr><td class=CDLEntry>msgBufferFull</td><td class=CDLDescription>Above buffer is full.</td></tr><tr><td class=CDLEntry>wrongErrorReport</td><td class=CDLDescription>Error in arguments to <a href="#CO_errorReport" class=LFunction id=link28 onMouseOver="ShowTip(event, 'tt2', 'link28')" onMouseOut="HideTip('tt2')">CO_errorReport</a> function.</td></tr><tr><td class=CDLEntry>errorReportBusy</td><td class=CDLDescription>Lock mechanism for error report function.</td></tr><tr><td class=CDLEntry>errorReportBusyError</td><td class=CDLDescription>Error, higher priority task called <a href="#CO_errorReport" class=LFunction id=link29 onMouseOver="ShowTip(event, 'tt2', 'link29')" onMouseOut="HideTip('tt2')">CO_errorReport</a> function while it was busy.</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_errorReport"></a>CO_errorReport</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>INTEGER8 CO_errorReport(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EM,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorBit,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorCode,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED32&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>infoCode</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Report error condition.</p><p>Function is called on any error condition inside CANopen stack and may also be called by application on custom error condition.&nbsp; Emergency message is sent after the first occurence of specific error.&nbsp; In case of critical error, device will not be able to stay in NMT_OPERATIONAL state.</p><p>Function is quite short and may be used form any task or interrupt.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>EM</td><td class=CDLDescription>Pointer to Emergency object <a href="#CO_emergencyReport_t" class=LVariable id=link30 onMouseOver="ShowTip(event, 'tt1', 'link30')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a>.</td></tr><tr><td class=CDLEntry>errorBit</td><td class=CDLDescription>One of the <a href="#Error_status_bits" class=LConstant id=link31 onMouseOver="ShowTip(event, 'tt12', 'link31')" onMouseOut="HideTip('tt12')">Error status bits</a> constants.</td></tr><tr><td class=CDLEntry>errorCode</td><td class=CDLDescription><a href="#Error_code" class=LGeneric >Error code</a></td></tr><tr><td class=CDLEntry>infoCode</td><td class=CDLDescription>32 bit value is passed to byetes 4...7 of the Emergency message.</td></tr></table><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>-3</td><td class=CDLDescription>CO_errorReport is busy, message is deleted.</td></tr><tr><td class=CDLEntry>-2</td><td class=CDLDescription>Emergency buffer is full, message is deleted.</td></tr><tr><td class=CDLEntry>-1</td><td class=CDLDescription>Error in arguments.</td></tr><tr><td class=CDLEntry>0</td><td class=CDLDescription>Error was allready present before, no action was performed.</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>Error is new, Emergency will be send.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_errorReset"></a>CO_errorReset</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>INTEGER8 CO_errorReset(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EM,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorBit,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorCode,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED32&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>infoCode</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Resets error condition.</p><p>Function is called if any error condition is solved.&nbsp; Emergency message is sent with <a href="#Error_code" class=LGeneric >Error code</a> 0x0000.</p><p>Function is quite short and may be used form any task or interrupt.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>EM</td><td class=CDLDescription>Pointer to Emergency object <a href="#CO_emergencyReport_t" class=LVariable id=link32 onMouseOver="ShowTip(event, 'tt1', 'link32')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a>.</td></tr><tr><td class=CDLEntry>errorBit</td><td class=CDLDescription>One of the <a href="#Error_status_bits" class=LConstant id=link33 onMouseOver="ShowTip(event, 'tt12', 'link33')" onMouseOut="HideTip('tt12')">Error status bits</a> constants.</td></tr><tr><td class=CDLEntry>errorCode</td><td class=CDLDescription><a href="#Error_code" class=LGeneric >Error code</a></td></tr><tr><td class=CDLEntry>infoCode</td><td class=CDLDescription>32 bit value is passed to byetes 4...7 of the Emergency message.</td></tr></table><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>-3</td><td class=CDLDescription>CO_errorReport is busy, message is deleted.</td></tr><tr><td class=CDLEntry>-2</td><td class=CDLDescription>Emergency buffer is full, message is deleted.</td></tr><tr><td class=CDLEntry>-1</td><td class=CDLDescription>Error in arguments.</td></tr><tr><td class=CDLEntry>0</td><td class=CDLDescription>Error was not present before, no action was performed.</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>Error bit is cleared, Emergency with <a href="#Error_code" class=LGeneric >Error code</a> 0 will be send.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_isError"></a>CO_isError</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>UNSIGNED8 CO_isError(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EM,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorBit,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>dummy</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Check specific error condition.</p><p>Function returns 1, if specific internal error is present.&nbsp; Othervise it returns 0.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>EM</td><td class=CDLDescription>Pointer to Emergency object <a href="#CO_emergencyReport_t" class=LVariable id=link34 onMouseOver="ShowTip(event, 'tt1', 'link34')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a>.</td></tr><tr><td class=CDLEntry>errorBit</td><td class=CDLDescription>One of the <a href="#Error_status_bits" class=LConstant id=link35 onMouseOver="ShowTip(event, 'tt12', 'link35')" onMouseOut="HideTip('tt12')">Error status bits</a> constants.</td></tr><tr><td class=CDLEntry>dummy</td><td class=CDLDescription>For compatibility.</td></tr></table><h4 class=CHeading>Return</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0</td><td class=CDLDescription>Error is <b>not</b> present.</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>Error is present.</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Variables"></a>Variables</h3></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="CO_emergencyProcess_t"></a>CO_emergencyProcess_t</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>typedef struct{ UNSIGNED8 *errorRegister; UNSIGNED32 *preDefinedErrorField; UNSIGNED8 preDefinedErrorFieldSize; UNSIGNED8 preDefinedErrorFieldNumberOfErrors; UNSIGNED16 inhibitEmergencyTimer; CO_emergencyReport_t *reportBuffer; CO_CANmodule_t *CANdev; CO_CANtxArray_t *CANtxBuff; }CO_emergencyProcess_t</td></tr></table></blockquote><p>Object controls internal error state and sends emergency message.</p><h4 class=CHeading>Variables</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>errorRegister</td><td class=CDLDescription>See parameters in <a href="#CO_emergency_init" class=LFunction id=link36 onMouseOver="ShowTip(event, 'tt8', 'link36')" onMouseOut="HideTip('tt8')">CO_emergency_init</a>.</td></tr><tr><td class=CDLEntry>preDefinedErrorField</td><td class=CDLDescription>See parameters in <a href="#CO_emergency_init" class=LFunction id=link37 onMouseOver="ShowTip(event, 'tt8', 'link37')" onMouseOut="HideTip('tt8')">CO_emergency_init</a>.</td></tr><tr><td class=CDLEntry>preDefinedErrorFieldSize</td><td class=CDLDescription>See parameters in <a href="#CO_emergency_init" class=LFunction id=link38 onMouseOver="ShowTip(event, 'tt8', 'link38')" onMouseOut="HideTip('tt8')">CO_emergency_init</a>.</td></tr><tr><td class=CDLEntry>preDefinedErrorFieldNumberOfErrors</td><td class=CDLDescription>Number of errors stored in <u>preDefinedErrorField</u> array.</td></tr><tr><td class=CDLEntry>reportBuffer</td><td class=CDLDescription>Here new emergencies are written by <a href="#CO_errorReport" class=LFunction id=link39 onMouseOver="ShowTip(event, 'tt2', 'link39')" onMouseOut="HideTip('tt2')">CO_errorReport</a>.</td></tr><tr><td class=CDLEntry>inhibitEmergencyTimer</td><td class=CDLDescription>Internal timer for emergency message.</td></tr><tr><td class=CDLEntry>CANdev</td><td class=CDLDescription>Pointer to CAN device used for EM transmission <a href="BECK_SC2x3/CO_driver-h.html#CO_CANmodule_t" class=LVariable id=link40 onMouseOver="ShowTip(event, 'tt13', 'link40')" onMouseOut="HideTip('tt13')">CO_CANmodule_t</a>.</td></tr><tr><td class=CDLEntry>CANtxBuff</td><td class=CDLDescription>CAN transmit buffer inside CANdev for emergency message.</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_ODF_1003"></a>CO_ODF_1003</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>UNSIGNED32 CO_ODF_1003(</td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>object,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>index,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>subIndex,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pLength,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>attribute,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>dir,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>dataBuff,</td></tr><tr><td></td><td class=PTypePrefix nowrap>const&nbsp;</td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pData</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Function for accessing <u>Pre-Defined Error Field</u> (index 0x1003) from SDO server.</p><p>For more information see topic <a href="CO_SDO-h.html#SDO_server_access_function" class=LGeneric id=link41 onMouseOver="ShowTip(event, 'tt14', 'link41')" onMouseOut="HideTip('tt14')">SDO server access function</a> in CO_SDO.h file.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_ODF_1014"></a>CO_ODF_1014</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>UNSIGNED32 CO_ODF_1014(</td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>object,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>index,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>subIndex,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pLength,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>attribute,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>dir,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>dataBuff,</td></tr><tr><td></td><td class=PTypePrefix nowrap>const&nbsp;</td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pData</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Function for accessing <u>COB ID EMCY</u> (index 0x1014) from SDO server.</p><p>For more information see topic <a href="CO_SDO-h.html#SDO_server_access_function" class=LGeneric id=link42 onMouseOver="ShowTip(event, 'tt14', 'link42')" onMouseOut="HideTip('tt14')">SDO server access function</a> in CO_SDO.h file.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_emergency_init"></a>CO_emergency_init</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>INTEGER16 CO_emergency_init(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyReport,</td></tr><tr><td></td><td class=PType nowrap>CO_emergencyProcess_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyProcess,</td></tr><tr><td></td><td class=PType nowrap>CO_SDO_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>SDO,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>errorStatusBits,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorStatusBitsSize,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>errorRegister,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED32&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>preDefinedErrorField,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>preDefinedErrorFieldSize,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>msgBufferSize,</td></tr><tr><td></td><td class=PType nowrap>CO_CANmodule_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>CANdev,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>CANdevTxIdx,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>CANidTxEM</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Create and initialize Emergency object.</p><p>Function must be called in the communication reset section.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ppEmergencyReport</td><td class=CDLDescription>Pointer to address of emergency object <a href="#CO_emergencyReport_t" class=LVariable id=link43 onMouseOver="ShowTip(event, 'tt1', 'link43')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a>.&nbsp; If address is zero, memory for new object will be allocated and address will be set.</td></tr><tr><td class=CDLEntry>ppEmergencyProcess</td><td class=CDLDescription>Pointer to address of emergency object <a href="#CO_emergencyProcess_t" class=LVariable id=link44 onMouseOver="ShowTip(event, 'tt5', 'link44')" onMouseOut="HideTip('tt5')">CO_emergencyProcess_t</a>.&nbsp; If address is zero, memory for new object will be allocated and address will be set.</td></tr><tr><td class=CDLEntry>SDO</td><td class=CDLDescription>Pointer to SDO object <a href="CO_SDO-h.html#CO_SDO_t" class=LVariable id=link45 onMouseOver="ShowTip(event, 'tt15', 'link45')" onMouseOut="HideTip('tt15')">CO_SDO_t</a>.</td></tr><tr><td class=CDLEntry>errorStatusBits</td><td class=CDLDescription>Pointer to externaly defined array for storing <a href="#Error_status_bits" class=LConstant id=link46 onMouseOver="ShowTip(event, 'tt12', 'link46')" onMouseOut="HideTip('tt12')">Error status bits</a>.</td></tr><tr><td class=CDLEntry>errorStatusBitsSize</td><td class=CDLDescription>Size of above array.&nbsp; Must be &gt;= 6.</td></tr><tr><td class=CDLEntry>errorRegister</td><td class=CDLDescription>Pointer to <a href="#Error_register" class=LGeneric id=link47 onMouseOver="ShowTip(event, 'tt11', 'link47')" onMouseOut="HideTip('tt11')">Error register</a> (object dictionary, index 0x1001).</td></tr><tr><td class=CDLEntry>preDefinedErrorField</td><td class=CDLDescription>Pointer to <u>Pre defined error field</u> (object dictionary, index 0x1003).</td></tr><tr><td class=CDLEntry>preDefinedErrorFieldSize</td><td class=CDLDescription>Size of <u>Pre defined error field</u>.</td></tr><tr><td class=CDLEntry>msgBufferSize</td><td class=CDLDescription>Size for internal Emergency message buffer.</td></tr><tr><td class=CDLEntry>CANdev</td><td class=CDLDescription>CAN device for Emergency transmission <a href="BECK_SC2x3/CO_driver-h.html#CO_CANmodule_t" class=LVariable id=link48 onMouseOver="ShowTip(event, 'tt13', 'link48')" onMouseOut="HideTip('tt13')">CO_CANmodule_t</a>.</td></tr><tr><td class=CDLEntry>CANdevTxIdx</td><td class=CDLDescription>Index of transmit buffer pointer for Emergency transmission.</td></tr><tr><td class=CDLEntry>CANidTxEM</td><td class=CDLDescription>CAN identifier for Emergency message.</td></tr></table><h4 class=CHeading>Return <a href="BECK_SC2x3/CO_driver-h.html#CO_ReturnError" class=LConstant id=link49 onMouseOver="ShowTip(event, 'tt16', 'link49')" onMouseOut="HideTip('tt16')">CO_ReturnError</a></h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>CO_ERROR_NO</td><td class=CDLDescription>Operation completed successfully.</td></tr><tr><td class=CDLEntry>CO_ERROR_ILLEGAL_ARGUMENT</td><td class=CDLDescription>Error in function arguments.</td></tr><tr><td class=CDLEntry>CO_ERROR_OUT_OF_MEMORY</td><td class=CDLDescription>Memory allocation failed.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_emergency_delete"></a>CO_emergency_delete</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>void CO_emergency_delete(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyReport,</td></tr><tr><td></td><td class=PType nowrap>CO_emergencyProcess_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyProcess</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Delete Emergency object and free memory.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ppEmergencyReport</td><td class=CDLDescription>Pointer to pointer to Emergency report object <a href="#CO_emergencyReport_t" class=LVariable id=link50 onMouseOver="ShowTip(event, 'tt1', 'link50')" onMouseOut="HideTip('tt1')">CO_emergencyReport_t</a>.&nbsp; It is set to 0.</td></tr><tr><td class=CDLEntry>ppEmergencyProcess</td><td class=CDLDescription>Pointer to pointer to Emergency process object <a href="#CO_emergencyProcess_t" class=LVariable id=link51 onMouseOver="ShowTip(event, 'tt5', 'link51')" onMouseOut="HideTip('tt5')">CO_emergencyProcess_t</a>.&nbsp; It is set to 0.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CO_emergency_process"></a>CO_emergency_process</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>void CO_emergency_process(</td><td class=PType nowrap>CO_emergencyProcess_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EMpr,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>NMTisPreOrOperational,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>timeDifference_100us,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>EMinhTime</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p>Process Emergency object.</p><p>Function must be called cyclically.&nbsp; It verifies some communication errors, calculates bit 0 and bit 4 from <a href="#Error_register" class=LGeneric id=link52 onMouseOver="ShowTip(event, 'tt11', 'link52')" onMouseOut="HideTip('tt11')">Error register</a> and sends emergency message if necessary.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>EMpr</td><td class=CDLDescription>Pointer to Emergency object <a href="#CO_emergencyProcess_t" class=LVariable id=link53 onMouseOver="ShowTip(event, 'tt5', 'link53')" onMouseOut="HideTip('tt5')">CO_emergencyProcess_t</a>.</td></tr><tr><td class=CDLEntry>NMTisPreOrOperational</td><td class=CDLDescription>Different than zero, if &lt;NMT internal State&gt; is NMT_PRE_OPERATIONAL or NMT_OPERATIONAL.</td></tr><tr><td class=CDLEntry>timeDifference_100us</td><td class=CDLDescription>Time difference from previous function call in [100 * microseconds].</td></tr><tr><td class=CDLEntry>EMinhTime</td><td class=CDLDescription><u>Inhibit time EMCY</u> (object dictionary, index 0x1015).</td></tr></table></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="Readme-txt.html">CANopenNode</a></div></div><div class=MEntry><div class=MFile><a href="application-h.html">application.h</a></div></div><div class=MEntry><div class=MFile><a href="CANopen-h.html">CANopen.h</a></div></div><div class=MEntry><div class=MFile id=MSelected>CO_Emergency.h</div></div><div class=MEntry><div class=MFile><a href="CO_HBconsumer-h.html">CO_HBconsumer.h</a></div></div><div class=MEntry><div class=MFile><a href="CO_NMT_Heartbeat-h.html">CO_NMT_Heartbeat.h</a></div></div><div class=MEntry><div class=MFile><a href="CO_PDO-h.html">CO_PDO.h</a></div></div><div class=MEntry><div class=MFile><a href="CO_SDO-h.html">CO_SDO.h</a></div></div><div class=MEntry><div class=MFile><a href="CO_SDOmaster-h.html">CO_SDOmaster.h</a></div></div><div class=MEntry><div class=MFile><a href="CO_SYNC-h.html">CO_SYNC.h</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">PIC32</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="PIC32/CO_driver-h.html">CO_driver.h</a></div></div><div class=MEntry><div class=MFile><a href="PIC32/eeprom-h.html">eeprom.h</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">BECK_SC2x3</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="BECK_SC2x3/CO_driver-h.html">CO_driver.h</a></div></div><div class=MEntry><div class=MFile><a href="BECK_SC2x3/eeprom-h.html">eeprom.h</a></div></div><div class=MEntry><div class=MFile><a href="BECK_SC2x3/CgiLog-h.html">CgiLog.h</a></div></div><div class=MEntry><div class=MFile><a href="BECK_SC2x3/CgiOD-h.html">CgiOD.h</a></div></div><div class=MEntry><div class=MFile><a href="BECK_SC2x3/CgiSend-h.html">CgiSend.h</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">PIC24H_dsPIC33F</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="PIC24H_dsPIC33F/CO_driver-h.html">CO_driver.h</a></div></div><div class=MEntry><div class=MFile><a href="PIC24H_dsPIC33F/eeprom-h.html">eeprom.h</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">dsPIC30F</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MFile><a href="dsPIC30F/CO_driver-h.html">CO_driver.h</a></div></div><div class=MEntry><div class=MFile><a href="dsPIC30F/eeprom-h.html">eeprom.h</a></div></div><div class=MEntry><div class=MFile><a href="dsPIC30F/memcpyram2flash-h.html">memcpyram2flash.h</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Index</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Files.html">Files</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Files">Files</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>typedef struct{ UNSIGNED8 *errorStatusBits; UNSIGNED8 errorStatusBitsSize; UNSIGNED8 *msgBuffer; UNSIGNED8 *msgBufferEnd; UNSIGNED8 *msgBufferWritePtr; UNSIGNED8 *msgBufferReadPtr; UNSIGNED8 msgBufferFull; UNSIGNED8 wrongErrorReport; UNSIGNED8 errorReportBusy; UNSIGNED8 errorReportBusyError; }CO_emergencyReport_t</td></tr></table></blockquote>Object contains error buffer, to which new emergency messages are written, when CO_errorReport function is called. </div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>INTEGER8 CO_errorReport(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EM,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorBit,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorCode,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED32&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>infoCode</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Report error condition.</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>INTEGER8 CO_errorReset(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EM,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorBit,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorCode,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED32&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>infoCode</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Resets error condition.</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>UNSIGNED8 CO_isError(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EM,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorBit,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>dummy</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Check specific error condition.</div></div><div class=CToolTip id="tt5"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>typedef struct{ UNSIGNED8 *errorRegister; UNSIGNED32 *preDefinedErrorField; UNSIGNED8 preDefinedErrorFieldSize; UNSIGNED8 preDefinedErrorFieldNumberOfErrors; UNSIGNED16 inhibitEmergencyTimer; CO_emergencyReport_t *reportBuffer; CO_CANmodule_t *CANdev; CO_CANtxArray_t *CANtxBuff; }CO_emergencyProcess_t</td></tr></table></blockquote>Object controls internal error state and sends emergency message.</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>UNSIGNED32 CO_ODF_1003(</td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>object,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>index,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>subIndex,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pLength,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>attribute,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>dir,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>dataBuff,</td></tr><tr><td></td><td class=PTypePrefix nowrap>const&nbsp;</td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pData</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Function for accessing <u>Pre-Defined Error Field</u> (index 0x1003) from SDO server.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>UNSIGNED32 CO_ODF_1014(</td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>object,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>index,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>subIndex,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pLength,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>attribute,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>dir,</td></tr><tr><td></td><td class=PTypePrefix nowrap></td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>dataBuff,</td></tr><tr><td></td><td class=PTypePrefix nowrap>const&nbsp;</td><td class=PType nowrap>void&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>pData</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Function for accessing <u>COB ID EMCY</u> (index 0x1014) from SDO server.</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>INTEGER16 CO_emergency_init(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyReport,</td></tr><tr><td></td><td class=PType nowrap>CO_emergencyProcess_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyProcess,</td></tr><tr><td></td><td class=PType nowrap>CO_SDO_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>SDO,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>errorStatusBits,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>errorStatusBitsSize,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>errorRegister,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED32&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>preDefinedErrorField,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>preDefinedErrorFieldSize,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>msgBufferSize,</td></tr><tr><td></td><td class=PType nowrap>CO_CANmodule_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>CANdev,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>CANdevTxIdx,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>CANidTxEM</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Create and initialize Emergency object.</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>void CO_emergency_delete(</td><td class=PType nowrap>CO_emergencyReport_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyReport,</td></tr><tr><td></td><td class=PType nowrap>CO_emergencyProcess_t&nbsp;</td><td class=PParameterPrefix nowrap>**</td><td class=PParameter nowrap>ppEmergencyProcess</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Delete Emergency object and free memory.</div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>void CO_emergency_process(</td><td class=PType nowrap>CO_emergencyProcess_t&nbsp;</td><td class=PParameterPrefix nowrap>*</td><td class=PParameter nowrap>EMpr,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED8&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>NMTisPreOrOperational,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>timeDifference_100us,</td></tr><tr><td></td><td class=PType nowrap>UNSIGNED16&nbsp;</td><td class=PParameterPrefix nowrap></td><td class=PParameter nowrap>EMinhTime</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Process Emergency object.</div></div><div class=CToolTip id="tt11"><div class=CGeneric>Object dictionary, index 0x1001.</div></div><div class=CToolTip id="tt12"><div class=CConstant>Indexes and Error codes of specific errors. </div></div><div class=CToolTip id="tt13"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>typedef struct{ UNSIGNED16 CANbaseAddress; CO_CANrxArray_t *rxArray; UNSIGNED16 rxSize; CO_CANtxArray_t *txArray; UNSIGNED16 txSize; volatile UNSIGNED8 *curentSyncTimeIsInsideWindow; volatile UNSIGNED8 bufferInhibitFlag; volatile UNSIGNED8 firstCANtxMessage; volatile UNSIGNED8 error; volatile UNSIGNED16 CANtxCount; UNSIGNED32 errOld; void *EM; }CO_CANmodule_t</td></tr></table></blockquote>Object controls CAN module.</div></div><div class=CToolTip id="tt14"><div class=CGeneric>Function, which reads/writes Object dictionary variable data.</div></div><div class=CToolTip id="tt15"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>typedef struct{ UNSIGNED8 CANrxData[8]; //take care for correct (word) alignment! UNSIGNED8 databuffer[CO_OD_MAX_OBJECT_SIZE]; //take care for correct (word) alignment! const sCO_OD_object *ObjectDictionary; UNSIGNED16 ObjectDictionarySize; void **ObjectDictionaryPointers; UNSIGNED8 nodeId; UNSIGNED16 dataLength; UNSIGNED16 bufferOffset; UNSIGNED8 state; const sCO_OD_object *pODE; UNSIGNED16 indexOfFoundObject; UNSIGNED16 index; UNSIGNED8 subIndex; UNSIGNED16 timeoutTimer; UNSIGNED8 CANrxNew; CO_CANmodule_t *CANdevTx; CO_CANtxArray_t *CANtxBuff; }CO_SDO_t</td></tr></table></blockquote>Object controls SDO server.</div></div><div class=CToolTip id="tt16"><div class=CConstant>Return values of most CANopen functions. </div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>